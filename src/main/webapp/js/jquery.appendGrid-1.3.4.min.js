/*!
* jQuery appendGrid v1.3.4
* https://appendgrid.apphb.com/
*
* Copyright 2014 Albert L.
* Dual licensed under the LGPL (http://www.gnu.org/licenses/lgpl.html)
* and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
*
* Depends:
* jQuery v1.9.1+
* jquery UI v1.10.2+
*/
(function(f){var p={caption:null,initRows:3,initData:null,columns:null,i18n:null,idPrefix:null,rowDragging:false,hideButtons:null,hideRowNumColumn:false,rowButtonsInFront:false,buttonClasses:null,customRowButtons:null,customFooterButtons:null,dataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null};var u={type:"text",name:null,value:null,display:null,displayCss:null,headerSpan:1,cellCss:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,uiOption:null,uiTooltip:null,customBuilder:null,customGetter:null,customSetter:null,onClick:null,onChange:null};var q={noColumnInfo:"Cannot initial grid without column information!",elemNotTable:"Cannot initial grid on element other than TABLE!",notInit:"`appendGrid` does not initialized",getValueMultiGrid:"Cannot get values on multiple grid",notSupportMethod:"Method is not supported by `appendGrid`: "};var s={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowDrag:"Sort Row",rowEmpty:"This Grid Is Empty"};var k={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,rowDrag:null};var e={append:false,removeLast:false,insert:false,remove:false,moveUp:false,moveDown:false};var j={init:function(Q){var L=this;var J,A,O,C,F,B;var I,P;if(L.length>0){if(!f.isArray(Q.columns)||Q.columns.length==0){alert(q.noColumnInfo);return L}J=L[0];if(l(J.tagName)||J.tagName!="TABLE"){alert(q.elemNotTable);return L}var E=f.extend({},p,Q);f.extend(E,{_uniqueIndex:0,_rowOrder:[],_isDataLoaded:false,_visibleCount:0,_finalColSpan:0,_hideLastColumn:false});if(f.isPlainObject(Q.i18n)){E._i18n=f.extend({},s,Q.i18n)}else{E._i18n=f.extend({},s)}if(f.isPlainObject(Q.buttonClasses)){E._buttonClasses=f.extend({},k,Q.buttonClasses)}else{E._buttonClasses=f.extend({},k)}if(f.isPlainObject(Q.hideButtons)){E.hideButtons=f.extend({},e,Q.hideButtons)}else{E.hideButtons=f.extend({},e)}if(l(E.idPrefix)){if(l(J.id)||J.id==""){E.idPrefix="ag"+new Date().getTime()}else{E.idPrefix=J.id}}A=document.createElement("thead");A.className="ui-widget-header";O=document.createElement("tbody");O.className="ui-widget-content";C=document.createElement("tfoot");C.className="ui-widget-header";f(J).empty().addClass("appendGrid ui-widget").append(A,O,C);F=A.insertRow(-1);if(!E.hideRowNumColumn){I=F.insertCell(-1);I.className="ui-widget-header"}var K=0;for(var M=0;M<E.columns.length;M++){var H=f.extend({},u,E.columns[M]);E.columns[M]=H;if(E.columns[M].type!="hidden"){E._visibleCount++;if(K==0){B=F.insertCell(-1);B.className="ui-widget-header";f(B).text(E.columns[M].display);if(E.columns[M].displayCss){f(B).css(E.columns[M].displayCss)}if(E.columns[M].headerSpan>1){f(B).attr("colSpan",E.columns[M].headerSpan);K=E.columns[M].headerSpan-1}}else{K--}}}if(E.hideButtons.insert&&E.hideButtons.remove&&E.hideButtons.moveUp&&E.hideButtons.moveDown&&(!f.isArray(E.customRowButtons)||E.customRowButtons.length==0)){E._hideLastColumn=true}E._finalColSpan=E._visibleCount;if(!E.hideRowNumColumn){E._finalColSpan++}if(!E._hideLastColumn){E._finalColSpan++}if(!E._hideLastColumn){if(E.rowButtonsInFront){if(E.hideRowNumColumn){P=F.insertCell(0)}else{I.colSpan=2;P=I}}else{P=F.insertCell(-1)}P.className="ui-widget-header"}if(E.caption){F=A.insertRow(0);B=F.insertCell(-1);B.className="ui-state-active caption";B.colSpan=E._finalColSpan;f(B).text(E.caption)}F=C.insertRow(-1);B=F.insertCell(-1);B.colSpan=E._finalColSpan;f("<input/>").attr({type:"hidden",id:E.idPrefix+"_rowOrder",name:E.idPrefix+"_rowOrder"}).appendTo(B);if(E.hideButtons.append&&E.hideButtons.removeLast&&(!f.isArray(E.customFooterButtons)||E.customFooterButtons.length==0)){F.style.display="none"}else{if(!E.hideButtons.append){f("<button/>").addClass("append",E._buttonClasses.append).attr({type:"button",title:E._i18n.append}).button({icons:{primary:"ui-icon-plusthick"},text:false}).click(function(){d(J,1,null,null)}).appendTo(B)}if(!E.hideButtons.removeLast){f("<button/>").addClass("removeLast",E._buttonClasses.removeLast).attr({type:"button",title:E._i18n.removeLast}).button({icons:{primary:"ui-icon-closethick"},text:false}).click(function(){i(J,null,this.value,false)}).appendTo(B)}if(E.customFooterButtons&&E.customFooterButtons.length){for(var N=E.customFooterButtons.length-1;N>=0;N--){var D=E.customFooterButtons[N];if(D&&D.uiButton&&D.click&&D.atTheFront){f(B).prepend(o(J,D))}}for(var N=0;N<E.customFooterButtons.length;N++){var D=E.customFooterButtons[N];if(D&&D.uiButton&&D.click&&!D.atTheFront){f(B).append(o(J,D))}}}}if(E.rowDragging){f(O).sortable({axis:"y",containment:J,handle:".rowDrag",helper:function(S,R){var T=R.children();var z=R.clone();z.children().each(function(U){f(this).width(T.eq(U).width())});return z},update:function(S,T){var z=T.item[0].id.substring(T.item[0].id.lastIndexOf("_")+1);var R=T.item[0].rowIndex-f("tr",A).length;n(J,T.originalPosition.top>T.position.top,z,R)}})}f(J).data("appendGrid",E);if(f.isArray(Q.initData)){a(J,Q.initData,true)}else{f(J).appendGrid("appendRow",E.initRows)}if(E._rowOrder.length==0){var G=f("<td></td>").text(E._i18n.rowEmpty).attr("colspan",E._finalColSpan);f("tbody",J).append(f("<tr></tr>").addClass("empty").append(G))}}return L},isReady:function(){var B=this,z=false;if(B.length>0){var A=B.first().data("appendGrid");if(A){z=true}}return z},isDataLoaded:function(){var B=this,z=null;if(this.length==1){var A=B.data("appendGrid");if(A){return A._isDataLoaded}else{return false}}else{return false}},load:function(z){var A=this;if(A.length>0){if(z!=null&&z.length>0){a(A[0],z,false)}else{w(A[0])}}return A},appendRow:function(z){return this.appendGrid("insertRow",z)},insertRow:function(C,G,A){var F=this;if(F.length>0){var z=F[0],E=null;var D=f(z).data("appendGrid");if(!D){alert(q.notInit)}else{if((f.isArray(C)&&C.length>0)||(f.isNumeric(C)&&C>0)){E=d(z,C,G,A);if(f.isNumeric(G)||f.isNumeric(A)){r(z,E.rowIndex);var B=D._rowOrder[E.addedRows[0]];f("#"+D.idPrefix+"_Insert_"+B,z).focus()}}}}return F},removeRow:function(D,z){var C=this;if(C.length>0){var A=C[0];var B=f(A).data("appendGrid");if(!B){alert(q.notInit)}else{if(B._rowOrder.length>0){i(A,D,z,true)}}}return C},emptyGrid:function(){var B=this;if(B.length>0){var z=B[0];var A=f(z).data("appendGrid");if(!A){alert(q.notInit)}else{w(z)}}return B},moveUpRow:function(F,E){var D=this,G=-1;if(D.length>0){var C=D[0],J,I,z,B;var A=f(C).data("appendGrid");if(!A){alert(q.notInit)}else{var H=null;J=C.getElementsByTagName("tbody")[0];if(f.isNumeric(F)&&F>0&&F<A._rowOrder.length){H=F;E=A._rowOrder[F];I=document.getElementById(A.idPrefix+"_Row_"+E,C)}else{if(f.isNumeric(E)){H=g(E,A);I=document.getElementById(A.idPrefix+"_Row_"+E,C)}}if(H!=null&&H>0){z=document.getElementById(A.idPrefix+"_Row_"+A._rowOrder[H-1],C);J.removeChild(I);J.insertBefore(I,z);A._rowOrder[H]=A._rowOrder[H-1];A._rowOrder[H-1]=E;B=f("td.first",z).html();f("td.first",z).html(f("td.first",I).html());f("td.first",I).html(B);b(C,A);f("td.last button.moveUp",I).removeClass("ui-state-hover").blur();f("td.last button.moveUp",z).focus();if(A.afterRowSwapped){A.afterRowSwapped(C,H,H-1)}}}}return D},moveDownRow:function(F,E){var D=this,G=-1;if(D.length>0){var C=D[0],J,I,z,B;var A=f(C).data("appendGrid");if(!A){alert(q.notInit)}else{var H=null;J=C.getElementsByTagName("tbody")[0];if(f.isNumeric(F)&&F>=0&&F<A._rowOrder.length-1){H=F;E=A._rowOrder[F];I=document.getElementById(A.idPrefix+"_Row_"+E,C)}else{if(f.isNumeric(E)){H=g(E,A);I=document.getElementById(A.idPrefix+"_Row_"+E,C)}}if(H!=null&&H!=A._rowOrder.length-1){z=document.getElementById(A.idPrefix+"_Row_"+A._rowOrder[H+1],C);J.removeChild(z);J.insertBefore(z,I);A._rowOrder[H]=A._rowOrder[H+1];A._rowOrder[H+1]=E;B=f("td.first",z).html();f("td.first",z).html(f("td.first",I).html());f("td.first",I).html(B);b(C,A);f("td.last button.moveDown",I).removeClass("ui-state-hover").blur();f("td.last button.moveDown",z).focus();if(A.afterRowSwapped){A.afterRowSwapped(C,H,H+1)}}}}return D},getRowCount:function(){var A=this;if(A.length>0){var z=A.data("appendGrid");if(z){return z._rowOrder.length}else{alert(q.notInit)}}else{alert(q.getValueMultiGrid)}return null},getUniqueIndex:function(B){var A=this;if(A.length>0&&B>=0){var z=A.data("appendGrid");if(z){if(B<z._rowOrder.length){return z._rowOrder[B]}}else{alert(q.notInit)}}return null},getRowIndex:function(A){var C=this;if(C.length>0){var B=C.data("appendGrid");if(B){for(var D=0;D<B._rowOrder.length;D++){if(B._rowOrder[D]==A){return D}}return null}else{alert(q.notInit)}}return null},getRowValue:function(E,A,D){var C=this,z=null;if(C.length>0){var B=C.data("appendGrid");if(B){if(f.isNumeric(E)&&E>=0&&E<B._rowOrder.length){A=B._rowOrder[E]}if(!l(A)){z=h(B,A,D)}}else{alert(q.notInit)}}return z},getAllValue:function(D){var E=this,A=null,B;if(E.length>0){var C=f(E).data("appendGrid");if(C){A=D?{}:[];for(var F=0;F<C._rowOrder.length;F++){if(D){B=h(C,C._rowOrder[F],F);f.extend(A,B)}else{B=h(C,C._rowOrder[F]);A.push(B)}}if(D){A._RowCount=C._rowOrder.length}}}return A},getCtrlValue:function(A,D){var B=this;if(B.length>0){settings=B.data("appendGrid");if(settings&&D>=0&&D<settings._rowOrder.length){for(var C=0;C<settings.columns.length;C++){if(settings.columns[C].name===A){return c(settings,C,settings._rowOrder[D])}}}}return null},setCtrlValue:function(B,G,D){var E=this;if(E.length>0){var A=this,C=f(this).data("appendGrid");if(C&&G>=0&&G<C._rowOrder.length){for(var F=0;F<C.columns.length;F++){if(C.columns[F].name==B){m(C,F,C._rowOrder[G],D);break}}}}return E},getCellCtrl:function(C,B){var D=this,A=null;if(D.length==1){settings=D.data("appendGrid");if(!settings){alert(q.notInit)}else{for(var E=0;E<settings.columns.length;E++){if(settings.columns[E].name===C){return t(settings.columns[E].type,settings.idPrefix,C,B);break}}}}return null},getCellCtrlByRowIndex:function(C,F){var D=this,A=null;if(D.length==1){settings=D.data("appendGrid");if(!settings){alert(q.notInit)}else{if(F>=0&&F<settings._rowOrder.length){var B=settings._rowOrder[F];for(var E=0;E<settings.columns.length;E++){if(settings.columns[E].name===C){return t(settings.columns[E].type,settings.idPrefix,C,B)}}}}}return null},setCellCtrlByRowIndex:function(C,G,D){var E=this,A=null;if(E.length==1){settings=E.data("appendGrid");if(!settings){alert(q.notInit)}else{if(G>=0&&G<settings._rowOrder.length){var B=settings._rowOrder[G];for(var F=0;F<settings.columns.length;F++){if(settings.columns[F].name===C){return setCellCtrl(settings.columns[F].type,settings.idPrefix,C,B,D)}}}}}return null},getRowOrder:function(){var B=this,z=null;if(this.length==1){var A=B.data("appendGrid");if(A){z=A._rowOrder.slice()}else{alert(q.notInit)}}else{alert(q.getValueMultiGrid)}return z}};function d(O,G,N,K){var T=f(O).data("appendGrid");var S=[],B=null,C,L,Q=[];var D=O.getElementsByTagName("thead")[0];var I=O.getElementsByTagName("tbody")[0];var F=G,A=false;if(f.isArray(G)){F=G.length;A=true}if(f.isNumeric(K)){for(var H=0;H<T._rowOrder.length;H++){if(T._rowOrder[H]==K){N=H;if(H!=0){B=H-1}break}}}else{if(f.isNumeric(N)){if(N>=T._rowOrder.length){N=null}else{B=N-1}}else{if(T._rowOrder.length!=0){N=null;B=T._rowOrder.length-1}}}if(T._rowOrder.length==0){f("tr.empty",O).remove()}for(var H=0;H<F;H++){T._uniqueIndex++;C=T._uniqueIndex;Q.length=0;if(f.isNumeric(N)){T._rowOrder.splice(N,0,C);tbRow=I.insertRow(N);S.push(N)}else{T._rowOrder.push(C);tbRow=I.insertRow(-1);S.push(T._rowOrder.length-1)}tbRow.id=T.idPrefix+"_Row_"+C;f(tbRow).data("appendGrid",C);if(!T.hideRowNumColumn){tbCell=tbRow.insertCell(-1);f(tbCell).addClass("ui-widget-content first").text(T._rowOrder.length)}for(var J=0;J<T.columns.length;J++){if(T.columns[J].type=="hidden"){Q.push(J);continue}tbCell=tbRow.insertCell(-1);tbCell.className="ui-widget-content";if(T.columns[J].cellCss!=null){f(tbCell).css(T.columns[J].cellCss)}L=null;if(T.columns[J].type=="custom"){if(typeof(T.columns[J].customBuilder)=="function"){L=T.columns[J].customBuilder(tbCell,T.idPrefix,T.columns[J].name,C)}}else{if(T.columns[J].type=="select"){L=document.createElement("select");L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;if(f.isArray(T.columns[J].ctrlOptions)){if(T.columns[J].ctrlOptions.length>0){if(f.isPlainObject(T.columns[J].ctrlOptions[0])){for(var M=0;M<T.columns[J].ctrlOptions.length;M++){L.options[L.options.length]=new Option(T.columns[J].ctrlOptions[M].label,T.columns[J].ctrlOptions[M].value)}}else{for(var M=0;M<T.columns[J].ctrlOptions.length;M++){L.options[L.options.length]=new Option(T.columns[J].ctrlOptions[M],T.columns[J].ctrlOptions[M])}}}}else{if(f.isPlainObject(T.columns[J].ctrlOptions)){for(var M in T.columns[J].ctrlOptions){L.options[L.options.length]=new Option(T.columns[J].ctrlOptions[M],M)}}else{if(typeof(T.columns[J].ctrlOptions)=="string"){var R=T.columns[J].ctrlOptions.split(";");for(var M=0;M<R.length;M++){var U=R[M].indexOf(":");if(-1==U){L.options[L.options.length]=new Option(R[M],R[M])}else{L.options[L.options.length]=new Option(R[M].substring(U+1,R[M].length),R[M].substring(0,U))}}}}}tbCell.appendChild(L)}else{if(T.columns[J].type=="checkbox"){L=document.createElement("input");L.type="checkbox";L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;L.value=1;tbCell.appendChild(L);tbCell.style.textAlign="center"}else{if(T.columns[J].type=="textarea"){L=document.createElement("textarea");L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;tbCell.appendChild(L)}else{if(-1!=T.columns[J].type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){L=document.createElement("input");try{L.type=T.columns[J].type}catch(E){}L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;tbCell.appendChild(L)}else{L=document.createElement("input");L.type="text";L.id=T.idPrefix+"_"+T.columns[J].name+"_"+C;L.name=L.id;tbCell.appendChild(L);if(T.columns[J].type=="ui-datepicker"){f(L).datepicker(T.columns[J].uiOption)}else{if(T.columns[J].type=="ui-spinner"){f(L).spinner(T.columns[J].uiOption)}else{if(T.columns[J].type=="ui-autocomplete"){f(L).autocomplete(T.columns[J].uiOption)}}}}}}}}if(T.columns[J].type!="custom"){if(T.columns[J].ctrlAttr!=null){f(L).attr(T.columns[J].ctrlAttr)}if(T.columns[J].ctrlProp!=null){f(L).prop(T.columns[J].ctrlProp)}if(T.columns[J].ctrlCss!=null){f(L).css(T.columns[J].ctrlCss)}if(T.columns[J].ctrlClass!=null){f(L).addClass(T.columns[J].ctrlClass)}if(T.columns[J].uiTooltip){f(L).tooltip(T.columns[J].uiTooltip)}if(typeof(T.columns[J].onClick)=="function"){f(L).click({caller:O,callback:T.columns[J].onClick,uniqueIndex:C},function(z){z.data.callback(z,f(z.data.caller).appendGrid("getRowIndex",z.data.uniqueIndex))})}if(typeof(T.columns[J].onChange)=="function"){f(L).change({caller:O,callback:T.columns[J].onChange,uniqueIndex:C},function(z){z.data.callback(z,f(z.data.caller).appendGrid("getRowIndex",z.data.uniqueIndex))})}}if(A){m(T,J,C,G[H][T.columns[J].name])}else{if(!l(T.columns[J].value)){m(T,J,C,T.columns[J].value)}}}if(!T._hideLastColumn||T.columns.length>T._visibleCount){if(!T.rowButtonsInFront){tbCell=tbRow.insertCell(-1)}else{if(!T.hideRowNumColumn){tbCell=tbRow.insertCell(1)}else{tbCell=tbRow.insertCell(0)}}tbCell.className="ui-widget-content last";if(T._hideLastColumn){tbCell.style.display="none"}if(!T.hideButtons.insert){f(tbCell).append(f("<button/>").addClass("insert",T._buttonClasses.insert).val(C).attr({id:T.idPrefix+"_Insert_"+C,type:"button",title:T._i18n.insert,tabindex:-1}).button({icons:{primary:"ui-icon-arrowreturnthick-1-w"},text:false}).click(function(){f(O).appendGrid("insertRow",1,null,this.value)}))}if(!T.hideButtons.remove){f(tbCell).append(f("<button/>").addClass("remove",T._buttonClasses.remove).val(C).attr({id:T.idPrefix+"_Delete_"+C,type:"button",title:T._i18n.remove,tabindex:-1}).button({icons:{primary:"ui-icon-trash"},text:false}).click(function(){i(O,null,this.value,false)}))}if(!T.hideButtons.moveUp){f(tbCell).append(f("<button/>").addClass("moveUp",T._buttonClasses.moveUp).val(C).attr({id:T.idPrefix+"_MoveUp_"+C,type:"button",title:T._i18n.moveUp,tabindex:-1}).button({icons:{primary:"ui-icon-arrowthick-1-n"},text:false}).click(function(){f(O).appendGrid("moveUpRow",null,this.value)}))}if(!T.hideButtons.moveDown){f(tbCell).append(f("<button/>").addClass("moveDown",T._buttonClasses.moveDown).val(C).attr({id:T.idPrefix+"_MoveDown_"+C,type:"button",title:T._i18n.moveDown,tabindex:-1}).button({icons:{primary:"ui-icon-arrowthick-1-s"},text:false}).click(function(){f(O).appendGrid("moveDownRow",null,this.value)}))}if(T.rowDragging){f("<div/>").addClass("rowDrag ui-state-default ui-corner-all",T._buttonClasses.rowDrag).attr("title",T._i18n.rowDrag).append(f("<div/>").addClass("ui-icon ui-icon-carat-2-n-s")).appendTo(tbCell)}for(var J=0;J<Q.length;J++){L=document.createElement("input");L.id=T.idPrefix+"_"+T.columns[Q[J]].name+"_"+C;L.name=L.id;L.type="hidden";if(A){L.value=G[H][T.columns[Q[J]].name]}else{if(!l(T.columns[Q[J]].value)){L.value=T.columns[Q[J]].value}}tbCell.appendChild(L)}if(T.customRowButtons&&T.customRowButtons.length){for(var J=T.customRowButtons.length-1;J>=0;J--){var P=T.customRowButtons[J];if(P&&P.uiButton&&P.click&&P.atTheFront){f(tbCell).prepend(v(O,P,C))}}for(var J=0;J<T.customRowButtons.length;J++){var P=T.customRowButtons[J];if(P&&P.uiButton&&P.click&&!P.atTheFront){f(tbCell).append(v(O,P,C))}}}}}b(O,T);if(f.isNumeric(N)){if(typeof(T.afterRowInserted)=="function"){T.afterRowInserted(O,B,S)}}else{if(typeof(T.afterRowAppended)=="function"){T.afterRowAppended(O,B,S)}}return{addedRows:S,parentIndex:B,rowIndex:N}}function o(z,B){var A=f("<button/>").attr({type:"button",tabindex:-1}).button(B.uiButton).click({tbWhole:z},B.click);if(B.btnClass){A.addClass(B.btnClass)}if(B.btnCss){A.css(B.btnCss)}if(B.btnAttr){A.attr(B.btnAttr)}return A}function v(A,C,z){var B=f("<button/>").val(z).attr({type:"button",tabindex:-1}).button(C.uiButton).click({tbWhole:A,uniqueIndex:z},function(D){var E=f(D.data.tbWhole).appendGrid("getRowValue",null,D.data.uniqueIndex);C.click(D,D.data.uniqueIndex,E)});if(C.btnClass){B.addClass(C.btnClass)}if(C.btnCss){B.css(C.btnCss)}if(C.btnAttr){B.attr(C.btnAttr)}return B}function i(B,H,A,E){var C=f(B).data("appendGrid");var G=B.getElementsByTagName("tbody")[0];if(f.isNumeric(A)){for(var F=0;F<C._rowOrder.length;F++){if(C._rowOrder[F]==A){H=F;break}}}if(f.isNumeric(H)){if(E||typeof(C.beforeRowRemove)!="function"||C.beforeRowRemove(B,H)){C._rowOrder.splice(H,1);G.deleteRow(H);b(B,C);r(B,H);if(typeof(C.afterRowRemoved)=="function"){C.afterRowRemoved(B,H)}}}else{if(E||typeof(C.beforeRowRemove)!="function"||C.beforeRowRemove(B,C._rowOrder.length-1)){A=C._rowOrder.pop();G.deleteRow(-1);b(B,C);if(typeof(C.afterRowRemoved)=="function"){C.afterRowRemoved(B,null)}}}if(C._rowOrder.length==0){var D=f("<td></td>").text(C._i18n.rowEmpty).attr("colspan",C._finalColSpan);f("tbody",B).append(f("<tr></tr>").addClass("empty").append(D))}}function w(z){var A=f(z).data("appendGrid");f("tbody",z).empty();A._rowOrder.length=0;A._uniqueIndex=0;b(z,A);if(A._rowOrder.length==0){var B=f("<td></td>").text(A._i18n.rowEmpty).attr("colspan",A._finalColSpan);f("tbody",z).append(f("<tr></tr>").addClass("empty").append(B))}}function r(A,D){var B=f(A).data("appendGrid");if(!B.hideRowNumColumn){for(var C=D;C<B._rowOrder.length;C++){f("#"+B.idPrefix+"_Row_"+B._rowOrder[C]+" td.first",A).text(C+1)}}}function a(F,B,E){var J,D,A,G,I;var C=f(F).data("appendGrid");if(C){J=F.getElementsByTagName("tbody")[0];f(J).empty();C._rowOrder.length=0;C._uniqueIndex=0;if(B!=null&&B.length){I=d(F,B.length,null,null);for(var z=0;z<I.addedRows.length;z++){for(var H=0;H<C.columns.length;H++){m(C,H,C._rowOrder[z],B[z][C.columns[H].name])}}}C._isDataLoaded=true;if(E){C.initData=null}f(F).data("appendGrid",C);if(typeof(C.dataLoaded)=="function"){C.dataLoaded(F)}}}function g(A,B){for(var C=0;C<B._rowOrder.length;C++){if(B._rowOrder[C]==A){return C}}return null}function l(z){return typeof(z)=="undefined"||z==null}function y(A,z){if(!l(A)&&f.isPlainObject(A)&&!l(A[z])){return A[z]}return null}function b(z,A){f(z).data("appendGrid",A);f("#"+A.idPrefix+"_rowOrder",z).val(A._rowOrder.join())}function x(B,A){var D=null;for(var C=0;C<B._rowOrder.length;C++){if(B._rowOrder[C]==A){return C}}return D}function h(D,B,F){var A={},C=null;for(var E=0;E<D.columns.length;E++){C=D.columns[E].name+(l(F)?"":"_"+F);A[C]=c(D,E,B)}return A}function c(D,B,z){var E=null,C=D.columns[B].type,A=D.columns[B].name;if(C=="checkbox"){E=t(C,D.idPrefix,A,z);if(E==null){return null}else{return E.checked?1:0}}else{if(C=="custom"){if(typeof(D.columns[B].customGetter)=="function"){return D.columns[B].customGetter(D.idPrefix,A,z)}else{return null}}else{E=t(C,D.idPrefix,A,z);if(E==null){return null}else{return E.value}}}}function t(B,C,A,z){return document.getElementById(C+"_"+A+"_"+z)}function m(D,B,z,E){var C=D.columns[B].type;var A=D.columns[B].name;if(C=="checkbox"){t(C,D.idPrefix,A,z).checked=(E!=null&&E!=0)}else{if(C=="custom"){if(typeof(D.columns[B].customSetter)=="function"){D.columns[B].customSetter(D.idPrefix,A,z,E)}}else{t(C,D.idPrefix,A,z).value=(E==null?"":E)}}}function n(B,G,A,C){var D=f(B).data("appendGrid");var F=-1;for(var E=0;E<D._rowOrder.length;E++){if(D._rowOrder[E]==A){if(G){F=C;D._rowOrder.splice(E,1);D._rowOrder.splice(C,0,A)}else{F=E;D._rowOrder.splice(C+1,0,A);D._rowOrder.splice(E,1)}break}}r(B,F);b(B,D)}f.fn.appendGrid=function(z){if(j[z]){return j[z].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof(z)==="object"||!z){return j.init.apply(this,arguments)}else{f.error(q.notSupportMethod+z)}}}})(jQuery);